---
phase: 5-pdf-foundation
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - frontend/src/app/forms/page.tsx
  - frontend/src/app/forms/[categoryId]/page.tsx
  - frontend/src/app/forms/[categoryId]/[formId]/page.tsx
  - frontend/src/components/CategoryCard.tsx
  - frontend/src/components/FormCard.tsx
  - frontend/src/components/pdf/PDFViewerPage.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can see a page listing all 5 form categories"
    - "User can click a category and see forms within it"
    - "User can click a form and see the PDF viewer"
    - "Navigation breadcrumbs show Forms > Category > Form"
    - "Category cards show icon, name, description, and form count"
  artifacts:
    - path: "frontend/src/app/forms/page.tsx"
      provides: "Category selection page"
      exports: ["default"]
    - path: "frontend/src/app/forms/[categoryId]/page.tsx"
      provides: "Form listing page for a category"
      exports: ["default"]
    - path: "frontend/src/app/forms/[categoryId]/[formId]/page.tsx"
      provides: "PDF viewer page for a specific form"
      exports: ["default"]
    - path: "frontend/src/components/CategoryCard.tsx"
      provides: "Category card component"
      exports: ["CategoryCard"]
    - path: "frontend/src/components/FormCard.tsx"
      provides: "Form card component"
      exports: ["FormCard"]
  key_links:
    - from: "frontend/src/app/forms/page.tsx"
      to: "/api/categories"
      via: "pdfApi.getCategories()"
      pattern: "getCategories"
    - from: "frontend/src/app/forms/[categoryId]/page.tsx"
      to: "/api/categories/:categoryId/forms"
      via: "pdfApi.getCategoryForms()"
      pattern: "getCategoryForms"
    - from: "frontend/src/app/forms/[categoryId]/[formId]/page.tsx"
      to: "PDFViewer component"
      via: "renders PDFViewer with pdfUrl"
      pattern: "PDFViewer.*pdfUrl"
---

<objective>
Build the category-based navigation flow: category selection page, form listing page, and form viewer page with the PDFViewer component.

Purpose: Users need to browse and find forms before viewing them. This creates the complete user journey from "I need a form" to "I can see the form."

Output:
- /forms page with 5 category cards
- /forms/[categoryId] page listing forms in that category
- /forms/[categoryId]/[formId] page showing the PDF viewer
- Reusable CategoryCard and FormCard components
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/API-CONTRACT-v2.md

# From 05-01
@frontend/src/types/pdf.ts
@frontend/src/store/pdfStore.ts
@frontend/src/components/pdf/PDFViewer.tsx
@frontend/src/lib/pdfApi.ts
@backend/src/data/categories.ts
@backend/src/data/forms-metadata.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Category and Form card components</name>
  <files>
    frontend/src/components/CategoryCard.tsx
    frontend/src/components/FormCard.tsx
  </files>
  <action>
1. Create `frontend/src/components/CategoryCard.tsx`:
   ```typescript
   interface CategoryCardProps {
     category: Category;
   }
   ```
   - Display: icon, name, description, formCount badge
   - Use Tailwind for styling: card with shadow, hover effect
   - Icon mapping: Use Lucide React icons
     - hand-helping -> HandHelping
     - graduation-cap -> GraduationCap
     - heart-pulse -> HeartPulse
     - home -> Home
     - file-signature -> FileSignature
   - Install lucide-react if not present: `npm install lucide-react`
   - Link wraps the card, navigates to /forms/[categoryId]
   - Accessible: role="article", descriptive aria-label

2. Create `frontend/src/components/FormCard.tsx`:
   ```typescript
   interface FormCardProps {
     form: PDFFormInfo;
     categoryId: string;
   }
   ```
   - Display: name, description, pageCount, badges for features
   - Show "Eligibility Check Available" badge if hasEligibilityCheck
   - Show "Signature Required" badge if signatureRequired
   - Link to /forms/[categoryId]/[formId]
   - Accessible: clear link text, form description
  </action>
  <verify>
    - Components render without errors
    - Icons display correctly for each category
    - Links navigate to correct routes
    - Cards have visible hover effects
  </verify>
  <done>
    CategoryCard and FormCard components created with proper styling, icons, and accessibility.
  </done>
</task>

<task type="auto">
  <name>Task 2: Category selection and form listing pages</name>
  <files>
    frontend/src/app/forms/page.tsx
    frontend/src/app/forms/[categoryId]/page.tsx
    frontend/src/app/forms/layout.tsx
  </files>
  <action>
1. Create `frontend/src/app/forms/layout.tsx`:
   - Simple layout wrapper with consistent padding
   - Pass children through

2. Create `frontend/src/app/forms/page.tsx`:
   - Server component that fetches categories
   - Use getCategories() from pdfApi
   - Render page title: "Choose a Category"
   - Subtitle: "Select a category to find the form you need"
   - Grid of CategoryCard components (3 columns on desktop, 1 on mobile)
   - Loading state: skeleton cards
   - Error state: friendly error message with retry button

3. Create `frontend/src/app/forms/[categoryId]/page.tsx`:
   - Server component that fetches forms for category
   - Use getCategoryForms(categoryId) from pdfApi
   - Breadcrumb: Forms > [Category Name]
   - Page title: "[Category Name] Forms"
   - Grid of FormCard components
   - Handle invalid categoryId: redirect to /forms or show error
   - Empty state: "No forms available in this category yet"
   - Back link to /forms

Note: For server components fetching data, either:
   - Make pdfApi functions work server-side (fetch with absolute URL)
   - Or use client components with useEffect for initial implementation

Recommendation: Use client components with useEffect for simplicity in hackathon context. Add 'use client' directive and fetch in useEffect.
  </action>
  <verify>
    - /forms page shows 5 category cards
    - Clicking category navigates to /forms/[categoryId]
    - /forms/social-assistance shows forms in that category
    - Breadcrumbs display correctly
    - Back navigation works
  </verify>
  <done>
    Category selection page shows all categories, form listing page shows forms within selected category with proper navigation.
  </done>
</task>

<task type="auto">
  <name>Task 3: PDF viewer page with full navigation</name>
  <files>
    frontend/src/app/forms/[categoryId]/[formId]/page.tsx
    frontend/src/components/pdf/PDFViewerPage.tsx
  </files>
  <action>
1. Create `frontend/src/components/pdf/PDFViewerPage.tsx`:
   - Client component ('use client')
   - Props: { formId: string; categoryId: string; formName: string }
   - Uses PDFViewer component from 05-01
   - Header with:
     - Breadcrumb: Forms > [Category] > [Form Name]
     - Back button to /forms/[categoryId]
   - Main content: PDFViewer taking full available height
   - Footer with:
     - Form name
     - Page indicator (from pdfStore)
   - Initialize pdfStore.setCurrentPdf on mount
   - Clean up pdfStore on unmount

2. Create `frontend/src/app/forms/[categoryId]/[formId]/page.tsx`:
   - Client component to get params
   - Fetch form metadata to get name
   - Find form in category forms or show 404
   - Render PDFViewerPage with props
   - Handle loading state
   - Handle form not found: show message with back link

3. Navigation flow test:
   - /forms -> click Social Assistance
   - /forms/social-assistance -> click Sample Government Form
   - /forms/social-assistance/sample-form -> see PDF viewer
   - Breadcrumbs work at each level
   - Back buttons work
  </action>
  <verify>
    - /forms/social-assistance/sample-form displays the PDF
    - Breadcrumbs show: Forms > Social Assistance > Sample Government Form
    - Back button returns to form listing
    - PDF controls (zoom, page nav) work
    - Invalid form ID shows error page
  </verify>
  <done>
    Complete navigation flow works: categories -> forms -> PDF viewer. User can browse, select, and view any form.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Full navigation flow works: /forms -> category -> form -> PDF
2. All 5 categories display with correct icons
3. Forms listing shows metadata (page count, badges)
4. PDF viewer displays with working controls
5. Breadcrumbs accurate at every level
6. Back navigation works throughout
7. Error states handled gracefully
8. Mobile responsive layout
</verification>

<success_criteria>
- User can select a category and see available forms (PDF-02, PDF-03)
- PDF displays in browser with zoom and page navigation (PDF-01)
- Navigation is intuitive with breadcrumbs and back buttons
- Components are reusable and accessible
- Error states provide clear user guidance
</success_criteria>

<output>
After completion, create `.planning/phases/5-pdf-foundation/05-02-SUMMARY.md`
</output>
